users_root:
  get:
    tags: [Users]
    summary: Get all users
    description: Retrieve list of all users (basic info only, excluding sensitive data)
    operationId: getAllUsers
    parameters:
      - $ref: "../openapi.yaml#/components/parameters/Page"
      - $ref: "../openapi.yaml#/components/parameters/Limit"
    responses:
      "200":
        description: Successfully retrieved users
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "../openapi.yaml#/components/schemas/UserBasicInfo"
  post:
    tags: [Users]
    summary: Create new user
    description: Add a new user to the system (admin only)
    operationId: createUser
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../openapi.yaml#/components/schemas/UserCreateRequest"
    responses:
      "200":
        $ref: "../openapi.yaml#/components/responses/Success"
      "400":
        $ref: "../openapi.yaml#/components/responses/BadRequest"

users_by_id:
  get:
    tags: [Users]
    summary: Get user by ID
    description: Retrieve detailed information of a specific user by their ID
    operationId: getUserById
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
    responses:
      "200":
        description: User found
        content:
          application/json:
            schema:
              $ref: "../openapi.yaml#/components/schemas/User"
      "404":
        description: User not found
  put:
    tags: [Users]
    summary: Update user by ID (admin only)
    description: Update user's department, position, or role (restricted to admin)
    operationId: updateUserById
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../openapi.yaml#/components/schemas/UserAdminUpdateRequest"
    responses:
      "200":
        $ref: "../openapi.yaml#/components/responses/Success"
      "400":
        $ref: "../openapi.yaml#/components/responses/BadRequest"
  delete:
    tags: [Users]
    summary: Delete user by ID
    description: Remove a user from the system by their ID
    operationId: deleteUserById
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
    responses:
      "200":
        $ref: "../openapi.yaml#/components/responses/Success"
      "404":
        description: User not found

users_search:
  get:
    tags: [Users]
    summary: Search users
    description: Search for users by ID, email, or phone number
    operationId: searchUsers
    parameters:
      - name: id
        in: query
        schema:
          type: string
      - name: email
        in: query
        schema:
          type: string
      - name: phone
        in: query
        schema:
          type: string
    responses:
      "200":
        description: List of users matching search criteria
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "../openapi.yaml#/components/schemas/UserBasicInfo"

users_me:
  get:
    tags: [Users]
    summary: Get personal profile
    description: Retrieve the authenticated user's personal profile
    operationId: getMyProfile
    responses:
      "200":
        description: Personal profile retrieved successfully
        content:
          application/json:
            schema:
              $ref: "../openapi.yaml#/components/schemas/User"
  put:
    tags: [Users]
    summary: Update personal profile
    description: Update userâ€™s own contact info (username, email, phone, address)
    operationId: updateMyProfile
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../openapi.yaml#/components/schemas/UserSelfUpdateRequest"
    responses:
      "200":
        $ref: "../openapi.yaml#/components/responses/Success"
      "400":
        $ref: "../openapi.yaml#/components/responses/BadRequest"
